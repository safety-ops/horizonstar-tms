---
phase: 07-core-dispatch-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - mockups/web-tms-redesign/dashboard.html
autonomous: false

must_haves:
  truths:
    - "Dashboard page shows all 9 sections in exact production order"
    - "Stat cards display realistic dollar amounts with monospaced formatting"
    - "Quick View profitability hero section has dark gradient with 6 metrics"
    - "Recent Trips table shows 5 rows with realistic trip data"
    - "Light/dark theme toggle works and all sections render correctly in both themes"
    - "Sparkline section shows CSS-based mini charts for 5 cost categories"
  artifacts:
    - path: "mockups/web-tms-redesign/dashboard.html"
      provides: "Complete dashboard mockup with all 9 sections"
      min_lines: 400
  key_links:
    - from: "dashboard.html"
      to: "shared.css"
      via: "link rel stylesheet"
      pattern: 'href="./shared.css"'
    - from: "dashboard.html"
      to: "base-template.html"
      via: "copied app shell (sidebar + header + page-content)"
      pattern: "class=\"app-layout\""
---

<objective>
Create the Dashboard mockup page with all 9 sections matching production layout exactly.

Purpose: The Dashboard is the primary landing page for dispatchers. This mockup must faithfully reproduce every section in the current production TMS dashboard, reskinned with the Phase 6 design system.

Output: `mockups/web-tms-redesign/dashboard.html` — a complete, standalone HTML file with all 9 dashboard sections, realistic sample data, and working light/dark theme toggle.
</objective>

<execution_context>
@/Users/reepsy/.claude/get-shit-done/workflows/execute-plan.md
@/Users/reepsy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-core-dispatch-pages/07-CONTEXT.md
@.planning/phases/07-core-dispatch-pages/07-RESEARCH.md
@mockups/web-tms-redesign/shared.css
@mockups/web-tms-redesign/base-template.html
@mockups/web-tms-redesign/component-showcase.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dashboard.html with all 9 sections</name>
  <files>mockups/web-tms-redesign/dashboard.html</files>
  <action>
Create `dashboard.html` by copying the app shell structure from `base-template.html` (sidebar, header, page-content wrapper, Lucide script, theme toggle JS, sidebar toggle JS). Set the page title to "Horizon Star TMS — Dashboard" and mark the Dashboard nav item as `active`.

Inside `<div class="page-content">`, build all 9 sections in this EXACT order. Use ONLY classes from `shared.css` — no custom CSS, no page-specific `<style>` blocks.

**Section 1: Tasks Widget**
- Card with header "Tasks" and a count badge (e.g., "5")
- Table with columns: Task, Priority, Due Date, Assigned To, Actions
- 5 rows of realistic task data:
  - "Follow up on COD payment - ORD-2024-027" / High (badge-red) / 2025-01-16 / Maria Garcia / View button
  - "Schedule truck 88 maintenance" / Medium (badge-amber) / 2025-01-18 / David Chen / View button
  - "Confirm delivery - ORD-2025-003" / High (badge-red) / 2025-01-15 / John Smith / View button
  - "Update broker contract - Central Dispatch" / Low (badge-blue) / 2025-01-20 / Sarah Johnson / View button
  - "Review driver settlement - Week 3" / Medium (badge-amber) / 2025-01-19 / Robert Williams / View button
- "View All" ghost button in card header

**Section 2: Recent Trips Table**
- Card with header "Recent Trips" and "View All" ghost button
- Table columns: Trip #, Truck, Driver, Date, Status, Revenue (right-aligned mono), Profit (right-aligned mono), Actions (sticky-col)
- 5 rows with realistic data:
  - TRIP 3 - 77 - 2025 / 77 / John Smith / 2025-01-15 / COMPLETED (badge-green) / $8,450.00 / $3,250.00 / View icon
  - TRIP 5 - 88 - 2025 / 88 / Maria Garcia / 2025-01-14 / COMPLETED (badge-green) / $6,780.00 / $2,105.50 / View icon
  - TRIP 2 - 55 - 2025 / 55 / David Chen / 2025-01-13 / IN_PROGRESS (badge-amber) / $5,920.00 / $1,890.00 / View icon
  - TRIP 4 - 42 - 2025 / 42 / Robert Williams / 2025-01-12 / COMPLETED (badge-green) / $7,340.00 / $2,678.50 / View icon
  - TRIP 1 - 63 - 2025 / 63 / Sarah Johnson / 2025-01-10 / PLANNED (badge-blue) / $0.00 / $0.00 / View icon

**Section 3: Revenue / Expenses / Profit Stat Cards (3-card row)**
- Use `display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;`
- 3 `stat-card` components:
  - Revenue: dollar-sign icon (green), $47,230.00
  - Expenses: trending-down icon (red), $12,450.00
  - Net Profit: trending-up icon (blue), $34,780.00
- Each stat-card uses the `.stat-card` class from shared.css

**Section 4: Quick View Profitability Hero**
- Use `.hero-card` class with dark gradient background
- Title: "Quick View — Profitability Overview"
- 6 metrics in a responsive grid (3 columns on desktop, 2 on tablet, 1 on mobile):
  - CPM (Cost Per Mile): $1.82
  - RPM (Revenue Per Mile): $3.47
  - Margin Per Mile: $1.65
  - Avg Vehicle Price: $987.50
  - Break-Even Price: $612.00
  - Profit Per Vehicle: $375.50
- Each metric: label (text-secondary, small) + value (large, bold, white or colored)

**Section 5: Other Metrics + Direct Trip Expenses Breakdown (2-column grid)**
- Left column — "Other Metrics" card:
  - Total Miles: 13,620
  - Total Vehicles Hauled: 47
  - Avg Miles Per Trip: 2,724
  - Active Trucks: 5
  - Completed Trips: 4
  - Use a list layout with label + value pairs
- Right column — "Direct Trip Expenses" card:
  - Table with columns: Category, Amount, % of Total
  - Rows: Fuel ($4,230 / 34.0%), Tolls ($1,875 / 15.1%), Driver Settlements ($3,420 / 27.5%), Maintenance ($890 / 7.2%), Permits ($340 / 2.7%), Parking ($295 / 2.4%), Other ($1,400 / 11.2%)
  - Total row at bottom: $12,450 / 100%

**Section 6: Fuel Tracking Comparison Card**
- Card with header "Fuel Tracking"
- 2-column comparison layout:
  - Left: "Trip-Level Fuel" — Total: $4,230, Avg/Mile: $0.31, Avg/Trip: $846.00
  - Right: "Fleet Fuel (Fuel Cards)" — Total: $5,120, Avg/Mile: $0.38, Avg/Trip: $1,024.00
- Variance row at bottom: Difference: $890, indicating fleet fuel exceeds trip fuel

**Section 7: KPIs + Top Performers (2-column grid)**
- Left column — "Key Performance Indicators" card:
  - On-Time Delivery Rate: 94.2% (green)
  - Average Load Revenue: $7,122.50
  - Fleet Utilization: 87.5%
  - Claims Rate: 1.8% (green, low is good)
  - Average Days to Payment: 12.3 days
- Right column — "Top Performers" card:
  - 3 cards or list items showing:
    - Top Driver: John Smith — $8,450 revenue, 12 vehicles
    - Top Truck: Truck 77 — $15,230 revenue, 3 trips
    - Top Route: NY to Home — $22,150 revenue

**Section 8: Payment Collection Cards**
- Header: "Payment Collection by Type"
- 5 cards in a responsive grid (use `grid-template-columns: repeat(auto-fit, minmax(180px, 1fr))`):
  - COD: $18,250 (badge-green) — 24 orders
  - COP: $8,430 (badge-blue) — 11 orders
  - Local COD: $5,120 (badge-amber) — 7 orders
  - Check: $9,780 (badge-purple or secondary) — 14 orders
  - Bill: $5,650 (badge-red) — 8 orders

**Section 9: Cost Trend Sparklines**
- Header: "Cost Trends — Last 12 Weeks"
- 5 mini chart cards in a responsive grid:
  - Fuel, Tolls, Maintenance, Permits, Parking
- Each card: category label, current value, 12-week trend direction (up/down arrow + percentage)
- For the "sparkline" chart: Use CSS-based mini bar charts — a row of 12 thin `<div>` elements with varying heights (styled via inline `height: Xpx`) inside a flex container. Each bar is 4px wide with 2px gap, using `var(--green)`, `var(--blue)`, `var(--amber)`, etc.
- Example bar heights for Fuel: 30, 35, 28, 40, 38, 42, 36, 44, 41, 38, 45, 48 (pixels, showing upward trend)

**Spacing:** Use `margin-bottom: 24px` between sections (consistent with DS pattern).

**Data realism:** All dollar amounts use specific cents (e.g., $8,450.00 not $8,450). All percentages use one decimal. Trip numbers follow TRIP X - YY - YYYY format.
  </action>
  <verify>
Open `mockups/web-tms-redesign/dashboard.html` in a browser. Verify:
1. Page loads without errors (check console)
2. All 9 sections are visible in correct order
3. Theme toggle switches between dark and light mode
4. Sidebar collapses/expands
5. Dashboard nav item is highlighted as active
6. Stat cards show realistic dollar amounts in monospaced font
7. Tables have proper header styling and hover rows
8. Quick View hero section has gradient background
9. Sparkline section shows CSS bar charts
  </verify>
  <done>dashboard.html exists with all 9 sections in production order, using shared.css classes exclusively, with realistic transport data and working theme toggle</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Dashboard mockup with all 9 sections: Tasks Widget, Recent Trips, Revenue/Expenses/Profit stat cards, Quick View profitability hero, Other Metrics + Expenses Breakdown, Fuel Tracking, KPIs + Top Performers, Payment Collection cards, and Cost Trend Sparklines.</what-built>
  <how-to-verify>
1. Open `mockups/web-tms-redesign/dashboard.html` in your browser
2. Verify all 9 sections appear in the correct production order (Tasks first, Sparklines last)
3. Toggle dark/light theme — both should look clean
4. Collapse the sidebar — content should reflow
5. Check that stat card dollar amounts use monospaced formatting
6. Check that the Quick View hero section has a gradient background with 6 metrics
7. Check that sparkline bars render as tiny CSS bar charts
8. Confirm section order matches your current TMS dashboard exactly
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
- [ ] dashboard.html loads in browser without console errors
- [ ] All 9 sections present in exact production order
- [ ] shared.css is the only stylesheet (no page-specific `<style>` blocks)
- [ ] Theme toggle works (dark/light)
- [ ] Sidebar toggle works (collapse/expand)
- [ ] All stat values use realistic numbers with cents
- [ ] Tables use `.table`, `.table-container`, `.sticky-col` classes
- [ ] Badges use `.badge-green`, `.badge-amber`, `.badge-blue`, `.badge-red`
- [ ] Quick View hero uses `.hero-card` class
- [ ] Sparkline charts render as CSS mini-bars
</verification>

<success_criteria>
Dashboard mockup faithfully reproduces all 9 sections of the current production dashboard, reskinned with Phase 6 design system, with realistic transport data and working light/dark toggle.
</success_criteria>

<output>
After completion, create `.planning/phases/07-core-dispatch-pages/07-01-SUMMARY.md`
</output>
