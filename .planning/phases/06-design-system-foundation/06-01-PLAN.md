---
phase: 06-design-system-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - mockups/web-tms-redesign/shared.css
  - mockups/web-tms-redesign/base-template.html
autonomous: true

must_haves:
  truths:
    - "shared.css contains all iOS v3 color tokens for both dark and light themes"
    - "Light/dark theme toggle works with smooth CSS transition and persists across page reload"
    - "Sidebar renders with all 28 navigation items organized into 7 sections"
    - "Sidebar supports expanded (240px), collapsed (72px), and mobile overlay states"
    - "Header bar renders with avatar, search input, and theme toggle button"
    - "Typography scale matches iOS v3 (11px to 28px) with Inter font"
  artifacts:
    - path: "mockups/web-tms-redesign/shared.css"
      provides: "Design tokens, base styles, typography, layout components"
      min_lines: 400
    - path: "mockups/web-tms-redesign/base-template.html"
      provides: "Working app shell with sidebar, header, theme toggle, and main content area"
      min_lines: 150
  key_links:
    - from: "base-template.html"
      to: "shared.css"
      via: "link rel=stylesheet"
      pattern: "shared\\.css"
    - from: "base-template.html"
      to: "localStorage"
      via: "inline head script for FART prevention"
      pattern: "localStorage\\.getItem.*theme"
    - from: "shared.css"
      to: "base-template.html"
      via: "data-theme attribute on html element"
      pattern: "data-theme.*light"
---

<objective>
Create the shared design system CSS file and base template HTML that all future Web TMS mockups will import. This plan builds the foundation: design tokens (colors, spacing, typography), base styles (reset, body, scrollbars), layout components (sidebar with navigation, header bar), and a working base template with light/dark theme toggle.

Purpose: Every subsequent mockup page (Phases 7-10, ~22 HTML files) will import shared.css and copy from base-template.html. Getting tokens, layout, and theming right here eliminates rework later.

Output:
- `mockups/web-tms-redesign/shared.css` — Design tokens through layout components
- `mockups/web-tms-redesign/base-template.html` — Working app shell
</objective>

<execution_context>
@/Users/reepsy/.claude/get-shit-done/workflows/execute-plan.md
@/Users/reepsy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-design-system-foundation/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared.css with design tokens, base styles, typography, and layout components</name>
  <files>mockups/web-tms-redesign/shared.css</files>
  <action>
Create the directory `mockups/web-tms-redesign/` if it doesn't exist, then create `shared.css` with the following layered sections:

**Section 1: DESIGN TOKENS** (`/* ===== DESIGN TOKENS ===== */`)

`:root` (dark theme as default, matching iOS v3 exactly):
- Backgrounds: `--bg-app: #09090b`, `--bg-card: #18181b`, `--bg-card-hover: #1f1f23`, `--bg-elevated: #27272a`
- Borders: `--border: rgba(255,255,255,0.06)`, `--border-active: rgba(34,197,94,0.4)`
- Brand colors: `--green: #22c55e`, `--green-dim: rgba(34,197,94,0.12)`, `--blue: #3b82f6`, `--blue-dim: rgba(59,130,246,0.12)`, `--amber: #f59e0b`, `--amber-dim: rgba(245,158,11,0.12)`, `--red: #ef4444`, `--red-dim: rgba(239,68,68,0.12)`, `--purple: #a855f7`, `--purple-dim: rgba(168,85,247,0.12)`
- Text: `--text-primary: #fafafa`, `--text-secondary: #a1a1aa`, `--text-muted: #52525b`
- Shadows: `--shadow-card: 0 1px 3px rgba(0,0,0,0.4)`, `--shadow-card-hover: 0 4px 12px rgba(0,0,0,0.5)`
- Icon default: `--icon-default: var(--text-secondary)`

`[data-theme="light"]` overrides (matching iOS v3 light theme):
- Backgrounds: `--bg-app: #f8f9fa`, `--bg-card: #ffffff`, `--bg-card-hover: #f3f4f6`, `--bg-elevated: #e5e7eb`
- Borders: `--border: rgba(0,0,0,0.08)`, `--border-active: rgba(22,163,74,0.4)`
- Brand colors adjusted: `--green: #16a34a`, `--blue: #2563eb`, `--amber: #d97706`, `--red: #dc2626`, `--purple: #9333ea`
- Dim variants adjusted for light: `--green-dim: rgba(22,163,74,0.1)`, etc.
- Text: `--text-primary: #111827`, `--text-secondary: #4b5563`, `--text-muted: #9ca3af`
- Shadows: `--shadow-card: 0 1px 3px rgba(0,0,0,0.08)`, `--shadow-card-hover: 0 4px 12px rgba(0,0,0,0.12)`

Layout constants:
- `--sidebar-width: 240px`, `--sidebar-collapsed-width: 72px`, `--header-height: 60px`
- `--radius-sm: 6px`, `--radius: 8px`, `--radius-lg: 12px`, `--radius-xl: 16px`
- Spacing: `--space-1: 4px` through `--space-8: 32px` (4px base scale)
- Easing: `--ease-smooth: cubic-bezier(0.4, 0, 0.2, 1)`, `--transition-fast: 0.15s`, `--transition-base: 0.2s`, `--transition-slow: 0.35s`

Typography tokens:
- `--text-xs: 11px`, `--text-sm: 13px`, `--text-base: 14px`, `--text-lg: 16px`, `--text-xl: 20px`, `--text-2xl: 24px`, `--text-3xl: 28px`
- `--weight-normal: 400`, `--weight-medium: 500`, `--weight-semibold: 600`, `--weight-bold: 700`, `--weight-heavy: 800`
- `--font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif`
- `--font-mono: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace`
- `--leading-tight: 1.2`, `--leading-normal: 1.5`, `--leading-relaxed: 1.6`

**Section 2: BASE STYLES** (`/* ===== BASE STYLES ===== */`)
- CSS reset: `*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }`
- `html, body`: height 100%, font-family var(--font-sans), font-size var(--text-base), color var(--text-primary), background var(--bg-app), line-height var(--leading-normal), `-webkit-font-smoothing: antialiased`
- `body` transition: `background-color var(--transition-base) var(--ease-smooth), color var(--transition-base) var(--ease-smooth)`
- Scrollbar: thin dark scrollbar styling (`::-webkit-scrollbar` 8px, track transparent, thumb var(--bg-elevated) with radius)
- `a` tags: color var(--green), text-decoration none
- Headings h1-h6 with appropriate sizes from type scale, weight-heavy for h1-h2, weight-bold for h3-h4, weight-semibold for h5-h6, color var(--text-primary), line-height var(--leading-tight)
- `p` margin-bottom var(--space-3)
- `code, pre` font-family var(--font-mono)
- Selection color: `::selection { background: var(--green-dim); color: var(--green); }`

**Section 3: LAYOUT COMPONENTS** (`/* ===== LAYOUT COMPONENTS ===== */`)

App layout container:
- `.app-layout` display flex, min-height 100vh

Sidebar (`.sidebar`):
- Width var(--sidebar-width), height 100vh, position fixed, left 0, top 0
- Background var(--bg-card), border-right 1px solid var(--border)
- display flex, flex-direction column, z-index 100
- transition: width var(--transition-slow) var(--ease-smooth)
- overflow-y auto, overflow-x hidden
- `.sidebar-logo` area at top: padding 16px 20px, flex-shrink 0, display flex, align-items center, gap 12px, border-bottom 1px solid var(--border). Logo text: font-size var(--text-lg), font-weight var(--weight-heavy), color var(--green). Include a small icon placeholder.
- `.sidebar-nav` flex 1, overflow-y auto, padding 8px 0
- `.nav-section` margin-bottom 4px. `.nav-section-label`: padding 8px 20px, font-size var(--text-xs), font-weight var(--weight-semibold), color var(--text-muted), text-transform uppercase, letter-spacing 1px
- `.nav-item`: display flex, align-items center, gap 12px, padding 10px 20px, color var(--text-secondary), cursor pointer, transition all var(--transition-fast), border-left 3px solid transparent, font-size var(--text-sm)
- `.nav-item:hover`: background var(--bg-card-hover), color var(--text-primary)
- `.nav-item.active`: background var(--green-dim), color var(--green), border-left-color var(--green), font-weight var(--weight-medium)
- `.nav-item .nav-icon`: width 20px, height 20px, flex-shrink 0
- `.nav-item .nav-label`: white-space nowrap, overflow hidden, text-overflow ellipsis, transition opacity var(--transition-fast)

Collapsed sidebar (`.sidebar.collapsed`):
- width var(--sidebar-collapsed-width)
- `.sidebar.collapsed .nav-label` display none
- `.sidebar.collapsed .nav-section-label` display none
- `.sidebar.collapsed .sidebar-logo-text` display none
- `.sidebar.collapsed .nav-item` justify-content center, padding 10px 0, border-left-color transparent
- `.sidebar.collapsed .nav-item .nav-icon` width 22px, height 22px

Sidebar toggle button:
- `.sidebar-toggle` at bottom of sidebar: padding 12px, border-top 1px solid var(--border), display flex, align-items center, justify-content center, cursor pointer, color var(--text-muted), transition all var(--transition-fast)
- `.sidebar-toggle:hover` color var(--text-primary)

Header (`.header`):
- height var(--header-height), position sticky, top 0, z-index 50
- display flex, align-items center, justify-content space-between, padding 0 24px
- background var(--bg-card), border-bottom 1px solid var(--border)
- `.header-left`: display flex, align-items center, gap 16px
- `.header-title`: font-size var(--text-xl), font-weight var(--weight-heavy), color var(--text-primary)
- `.header-search`: display flex, align-items center, gap 8px, background var(--bg-app), border 1px solid var(--border), border-radius var(--radius), padding 8px 14px, width 320px, transition border-color var(--transition-fast). Input inside: background transparent, border none, outline none, color var(--text-primary), font-size var(--text-sm), width 100%. Focus: border-color var(--green)
- `.header-right`: display flex, align-items center, gap 12px
- `.header-avatar`: width 36px, height 36px, border-radius 50%, background var(--green-dim), color var(--green), display flex, align-items center, justify-content center, font-weight var(--weight-semibold), font-size var(--text-sm)
- `.theme-toggle`: width 36px, height 36px, border-radius var(--radius-sm), background var(--bg-app), border 1px solid var(--border), display flex, align-items center, justify-content center, cursor pointer, color var(--text-secondary), transition all var(--transition-fast). Hover: color var(--text-primary), border-color var(--text-muted)

Main content area:
- `.main-content` margin-left var(--sidebar-width), flex 1, min-height 100vh, transition margin-left var(--transition-slow) var(--ease-smooth)
- `.main-content.sidebar-collapsed` margin-left var(--sidebar-collapsed-width)
- `.page-content` padding 24px, max-width 1400px

Mobile responsive (`@media (max-width: 768px)`):
- `.sidebar` position fixed, left -100%, width 280px, z-index 1000, transition left var(--transition-slow) var(--ease-smooth)
- `.sidebar.open` left 0
- `.sidebar-overlay` position fixed, inset 0, background rgba(0,0,0,0.5), z-index 999, opacity 0, pointer-events none, transition opacity var(--transition-base)
- `.sidebar-overlay.active` opacity 1, pointer-events auto
- `.main-content` margin-left 0
- `.header-search` display none (on very small screens)
- `.hamburger` display block (visible only on mobile)

Do NOT include UI components (buttons, cards, badges, tables, forms, modals) -- those go in Plan 02.
  </action>
  <verify>
Verify the file exists and has all required sections:
- `ls -la mockups/web-tms-redesign/shared.css` (file exists, >400 lines)
- grep for all section headers: "DESIGN TOKENS", "BASE STYLES", "LAYOUT COMPONENTS"
- grep for key dark tokens: `--bg-app: #09090b`, `--green: #22c55e`
- grep for light theme overrides: `data-theme="light"`, `--bg-app: #f8f9fa`
- grep for sidebar classes: `.sidebar`, `.sidebar.collapsed`, `.nav-item.active`
- grep for header classes: `.header`, `.header-search`, `.theme-toggle`
- grep for responsive: `@media (max-width: 768px)`
  </verify>
  <done>
shared.css contains:
- Complete iOS v3 dark/light color token system
- Typography scale (11px-28px) with Inter font
- Spacing scale (4px base)
- CSS reset and base element styles
- Sidebar with expanded/collapsed/mobile states
- Header with search, avatar, and theme toggle
- Responsive breakpoints for mobile
- Smooth theme transition on background-color and color
  </done>
</task>

<task type="auto">
  <name>Task 2: Create base-template.html with working app shell</name>
  <files>mockups/web-tms-redesign/base-template.html</files>
  <action>
Create `mockups/web-tms-redesign/base-template.html` -- a fully working HTML page that demonstrates the sidebar, header, and theme toggle built in Task 1.

Structure:

```html
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Horizon Star TMS — Base Template</title>

  <!-- FART prevention: set theme before CSS loads -->
  <script>
    (function() {
      const theme = localStorage.getItem('tms-theme') || 'dark';
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./shared.css">
</head>
<body>
  <!-- Sidebar overlay for mobile -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <div class="app-layout">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-logo">
        <div class="sidebar-logo-icon"><!-- Lucide truck icon --></div>
        <span class="sidebar-logo-text">Horizon Star</span>
      </div>

      <nav class="sidebar-nav">
        <!-- MAIN section -->
        <div class="nav-section">
          <div class="nav-section-label">Main</div>
          <a class="nav-item active" data-page="dashboard">
            <i data-lucide="layout-dashboard" class="nav-icon"></i>
            <span class="nav-label">Dashboard</span>
          </a>
          <!-- ... all 7 MAIN items ... -->
        </div>

        <!-- FLEET section (3 items: Drivers, Trucks, Local Drivers) -->
        <!-- PARTNERS section (4 items: Brokers, Dealers, Dispatchers, Dispatcher Ranking) -->
        <!-- FINANCIALS section (8 items: Financials, Billing, Trip Profitability, Payroll, Fuel, IFTA, Reports, AI Advisor) -->
        <!-- OPERATIONS section (3 items: Maintenance, Compliance, Applications) -->
        <!-- SETTINGS section (3 items: Settings, Users, Activity Log) -->
      </nav>

      <div class="sidebar-toggle" id="sidebarToggle">
        <i data-lucide="panel-left-close" class="nav-icon"></i>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
      <header class="header">
        <div class="header-left">
          <button class="hamburger" id="hamburger" style="display:none;">
            <i data-lucide="menu"></i>
          </button>
          <h1 class="header-title">Dashboard</h1>
        </div>

        <div class="header-search">
          <i data-lucide="search" class="ico-sm"></i>
          <input type="text" placeholder="Search orders, trips, drivers...">
        </div>

        <div class="header-right">
          <button class="theme-toggle" id="themeToggle" title="Toggle theme">
            <i data-lucide="moon" class="ico" id="themeIcon"></i>
          </button>
          <div class="header-avatar">JD</div>
        </div>
      </header>

      <div class="page-content">
        <p style="color: var(--text-secondary);">
          This is the base template. Replace this content with page-specific markup.
        </p>
      </div>
    </main>
  </div>

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@0.344.0/dist/umd/lucide.min.js"></script>
  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');

    themeToggle.addEventListener('click', function() {
      const html = document.documentElement;
      const current = html.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      localStorage.setItem('tms-theme', next);
      // Update icon
      themeIcon.setAttribute('data-lucide', next === 'dark' ? 'moon' : 'sun');
      lucide.createIcons();
    });

    // Sidebar toggle (collapse/expand)
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('mainContent');
    const sidebarToggle = document.getElementById('sidebarToggle');

    sidebarToggle.addEventListener('click', function() {
      sidebar.classList.toggle('collapsed');
      mainContent.classList.toggle('sidebar-collapsed');
    });

    // Mobile hamburger
    const hamburger = document.getElementById('hamburger');
    const sidebarOverlay = document.getElementById('sidebarOverlay');

    if (hamburger) {
      hamburger.addEventListener('click', function() {
        sidebar.classList.toggle('open');
        sidebarOverlay.classList.toggle('active');
      });
    }

    if (sidebarOverlay) {
      sidebarOverlay.addEventListener('click', function() {
        sidebar.classList.remove('open');
        sidebarOverlay.classList.remove('active');
      });
    }

    // Responsive: show hamburger on mobile
    function handleResize() {
      if (window.innerWidth <= 768) {
        hamburger.style.display = 'flex';
      } else {
        hamburger.style.display = 'none';
        sidebar.classList.remove('open');
        sidebarOverlay.classList.remove('active');
      }
    }
    window.addEventListener('resize', handleResize);
    handleResize();
  </script>
</body>
</html>
```

IMPORTANT implementation details:
- Include ALL 28 navigation items organized in 7 sections (MAIN: 7, FLEET: 3, PARTNERS: 4, FINANCIALS: 8, OPERATIONS: 3, SETTINGS: 3)
- Use exact Lucide icon names from research: layout-dashboard, map, message-square, truck, package, clipboard-list, check-square, users, truck, user, briefcase, building, phone, star, dollar-sign, file-text, trending-up, credit-card, droplet, file, bar-chart-2, brain, wrench, shield-check, file-plus, settings, users, activity
- Dashboard nav-item should have class "active" as default
- FART prevention script MUST be in <head> before CSS link
- localStorage key should be 'tms-theme' (namespaced to avoid conflicts with existing TMS)
- Theme toggle icon: show "moon" in dark mode, "sun" in light mode
- Sidebar collapse toggle icon: use "panel-left-close" / "panel-left-open" (change on toggle)
  </action>
  <verify>
- `ls -la mockups/web-tms-redesign/base-template.html` (file exists, >150 lines)
- Open in browser: sidebar shows with all navigation sections and items, header renders with search and avatar
- Click theme toggle: page transitions smoothly between dark (#09090b bg) and light (#f8f9fa bg)
- Reload page: theme persists (localStorage)
- Click sidebar toggle: sidebar collapses to 72px (icons only)
- Count nav items: should be 28 total across 7 section headers
- grep for all section labels: "Main", "Fleet", "Partners", "Financials", "Operations", "Settings"
- grep for FART prevention: `localStorage.getItem` in head before stylesheet link
  </verify>
  <done>
base-template.html is a fully working app shell that:
- Loads shared.css and Inter font
- Prevents theme flash (FART) with inline head script
- Renders sidebar with all 28 nav items in 7 sections with Lucide icons
- Sidebar collapses/expands with smooth animation
- Header shows page title, search bar, theme toggle, and avatar
- Theme toggle switches dark/light with localStorage persistence
- Mobile responsive: sidebar becomes overlay with hamburger menu
- Serves as copy-paste starting point for all future mockup pages
  </done>
</task>

</tasks>

<verification>
1. `mockups/web-tms-redesign/shared.css` exists with 400+ lines containing DESIGN TOKENS, BASE STYLES, and LAYOUT COMPONENTS sections
2. `mockups/web-tms-redesign/base-template.html` exists with 150+ lines, links to shared.css
3. Open base-template.html in browser:
   - Dark theme loads by default (dark background #09090b)
   - Sidebar shows 7 sections with 28 nav items, each with Lucide icon
   - Dashboard nav item is highlighted green (active state)
   - Header shows "Dashboard" title, search bar, theme toggle button, avatar
   - Click theme toggle -> smooth transition to light theme (#f8f9fa bg)
   - Reload -> theme persists
   - Click sidebar toggle -> collapses to icon-only (72px)
   - Resize to mobile -> sidebar hides, hamburger appears
</verification>

<success_criteria>
- shared.css has complete iOS v3 color tokens (dark + light variants)
- Theme toggle works with smooth transition and localStorage persistence
- Sidebar renders all 28 navigation items in correct sections
- Sidebar supports expanded, collapsed, and mobile overlay states
- Header renders with search, theme toggle, and avatar
- Typography uses Inter font with defined scale
- base-template.html serves as working copy-paste foundation for future mockups
</success_criteria>

<output>
After completion, create `.planning/phases/06-design-system-foundation/06-01-SUMMARY.md`
</output>
