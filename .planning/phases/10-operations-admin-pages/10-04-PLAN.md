---
phase: 10-operations-admin-pages
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - mockups/web-tms-redesign/settings.html
  - mockups/web-tms-redesign/activity-log.html
  - mockups/web-tms-redesign/team-chat.html
autonomous: false

must_haves:
  truths:
    - "Settings page has 4 integration sections as stacked cards: Samsara GPS, Google Maps, Email/Resend, Claude AI"
    - "Each settings card shows API key input field, status indicator (configured/not configured), and test/save/remove buttons"
    - "Activity Log has stats cards: Today, This Week, Unique Users, Total Records"
    - "Activity Log has filter dropdowns (by action, by user) and date range inputs"
    - "Activity Log has paginated table with color-coded action badges and detail column"
    - "Activity Log includes detail modal overlay showing full activity info"
    - "Team Chat shows 8-12 mock messages from different users with realistic conversation"
    - "Team Chat includes @ mentions, file attachment indicators, timestamps, message input area, and online status indicator"
    - "Light/dark theme toggle works on all 3 pages"
  artifacts:
    - path: "mockups/web-tms-redesign/settings.html"
      provides: "Complete settings page with 4 integration cards"
      min_lines: 400
    - path: "mockups/web-tms-redesign/activity-log.html"
      provides: "Complete activity log with filters, table, and detail modal"
      min_lines: 500
    - path: "mockups/web-tms-redesign/team-chat.html"
      provides: "Complete team chat with messages and input"
      min_lines: 400
  key_links:
    - from: "settings.html"
      to: "shared.css"
      via: "link rel stylesheet"
      pattern: 'href="./shared.css"'
    - from: "activity-log.html"
      to: "shared.css"
      via: "link rel stylesheet"
      pattern: 'href="./shared.css"'
    - from: "team-chat.html"
      to: "shared.css"
      via: "link rel stylesheet"
      pattern: 'href="./shared.css"'
---

<objective>
Create Settings, Activity Log, and Team Chat mockup pages — three admin/utility pages. Settings shows integration configuration cards. Activity Log shows a filterable event log with detail modal. Team Chat shows a messaging interface with realistic conversation.

Purpose: These are the final 3 pages completing the entire Web TMS UI redesign mockup set. Settings manages API integrations, Activity Log provides audit trail visibility, and Team Chat enables team communication.

Output: `mockups/web-tms-redesign/settings.html`, `mockups/web-tms-redesign/activity-log.html`, and `mockups/web-tms-redesign/team-chat.html` — three standalone HTML files.
</objective>

<execution_context>
@/Users/reepsy/.claude/get-shit-done/workflows/execute-plan.md
@/Users/reepsy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-operations-admin-pages/10-CONTEXT.md
@.planning/phases/10-operations-admin-pages/10-RESEARCH.md
@mockups/web-tms-redesign/shared.css
@mockups/web-tms-redesign/base-template.html
@mockups/web-tms-redesign/dashboard.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create settings.html with 4 integration cards</name>
  <files>mockups/web-tms-redesign/settings.html</files>
  <action>
Create `settings.html` by copying the app shell from `base-template.html`. Set title to "Horizon Star TMS — Settings" and mark the Settings nav item as `active`.

Inside `<div class="page-content">`, build the complete settings page.

**Reference production structure (lines 31817-31962 of index.html) for layout fidelity.**

---

## PAGE HEADER

- Title: "Settings" with settings/gear icon
- Subtitle: "Manage your integrations and API connections" (text-secondary)

## 4 INTEGRATION CARDS (stacked vertically, gap: 20px)

Each card: bg-card, border-radius var(--radius-lg), padding 24px, border-left 4px solid [color]

---

**Card 1: Samsara GPS Integration (green left border)**

Header row (flex, space-between):
- Left: Samsara GPS logo placeholder (green icon circle) + "Samsara GPS" (18px, bold) + "Fleet tracking and mileage data" (text-secondary)
- Right: Status badge — badge-green "Configured" (with green dot)

Body:
- API Token field: `<input type="password" value="••••••••••••sk_live_abc123" />` with show/hide toggle icon
- Connection info: "Connected since: Oct 15, 2025" (text-muted)
- "Last sync: 2 hours ago • 4 trucks tracked • 245,680 total miles" (text-muted)

Setup instructions (collapsible section or always visible — at Claude's discretion):
1. Log into Samsara Dashboard at cloud.samsara.com
2. Go to Settings → API Tokens
3. Create new token with "Read" permissions for Fleet
4. Copy the token and paste above

Action buttons:
- "Test Connection" (btn btn-outline, green text)
- "Save" (btn btn-primary)
- "Remove" (btn btn-outline, red text)

---

**Card 2: Google Maps Integration (blue left border)**

Header row:
- Left: Google Maps icon (blue circle) + "Google Maps" (18px, bold) + "Route optimization and distance calculations" (text-secondary)
- Right: Status badge — badge-green "Configured"

Body:
- API Key field: `<input type="password" value="••••••••••••AIzaSyB_xyz" />` with show/hide toggle
- Connection info: "Active since: Sep 1, 2025"
- "Used for: Route display, distance calculations, ETA estimates"

Action buttons: Test Connection, Save, Remove

---

**Card 3: Email / Resend Integration (purple left border)**

Header row:
- Left: Mail icon (purple circle) + "Email / Resend" (18px, bold) + "Email notifications and invoicing" (text-secondary)
- Right: Status badge — badge-green "Configured"

Body:
- API Key field: `<input type="password" value="••••••••••••re_abc123" />` with show/hide toggle
- From address: `<input type="text" value="dispatch@horizonstarllc.com" />`
- Connection info: "Active since: Nov 1, 2025"
- "Emails sent this month: 47"

Action buttons: Send Test Email, Save, Remove

---

**Card 4: Claude AI Integration (amber left border)**

Header row:
- Left: Bot/AI icon (amber circle) + "Claude AI" (18px, bold) + "AI-powered recommendations and analysis" (text-secondary)
- Right: Status badge — badge-red "Not Configured"

Body:
- API Key field: `<input type="text" placeholder="Enter your Anthropic API key..." />` (empty, not configured)
- Info text: "Claude AI powers financial optimization recommendations, load pricing suggestions, and compliance reminders."

Setup instructions:
1. Sign up at console.anthropic.com
2. Go to API Keys
3. Create a new key
4. Paste the key above and click Save

Action buttons:
- "Save" (btn btn-primary)
- (No Test/Remove since not configured)

---

**Styling notes:**
- Page-specific CSS in `<style>` tag for: integration cards, API key input styling, status indicator, icon circles. Target 60-80 lines.
- API key inputs: monospace font, bg-elevated background, full width
- Show/hide toggle: eye/eye-off icon button inside input
- Status badges: green dot + "Configured" or red dot + "Not Configured"
- Icon circles: 40px round, colored background at 15% opacity
  </action>
  <verify>
Open `mockups/web-tms-redesign/settings.html` in a browser. Verify:
1. Page loads without console errors
2. 4 stacked integration cards with colored left borders
3. Samsara: green border, "Configured" badge, masked API key, connection info
4. Google Maps: blue border, "Configured" badge, masked API key
5. Email/Resend: purple border, "Configured" badge, from address field
6. Claude AI: amber border, "Not Configured" badge, empty API key field, setup instructions
7. Each configured card has Test/Save/Remove buttons
8. Theme toggle works
  </verify>
  <done>settings.html exists with 4 integration cards (Samsara=green/configured, Google Maps=blue/configured, Email/Resend=purple/configured, Claude AI=amber/not configured), each with API key fields, status indicators, setup instructions, and action buttons, with working theme toggle</done>
</task>

<task type="auto">
  <name>Task 2: Create activity-log.html with filters, table, and detail modal</name>
  <files>mockups/web-tms-redesign/activity-log.html</files>
  <action>
Create `activity-log.html` by copying the app shell from `base-template.html`. Set title to "Horizon Star TMS — Activity Log" and mark the Activity Log nav item as `active`.

Inside `<div class="page-content">`, build the complete activity log page.

**Reference production structure (lines 35891-36081 of index.html) for layout fidelity.**

---

## PAGE HEADER

- Title: "Activity Log" with activity/list icon
- Right side: "Export" button (btn btn-secondary)

## STAT CARDS (4 cards)

Grid: `repeat(auto-fit, minmax(180px, 1fr)); gap: 16px;`
Each card: bg-card, padding 16px, border-radius, colored left border

1. Today: green border, "14" (large, bold), "Actions today" (text-secondary), calendar icon
2. This Week: blue border, "87" (large, bold), "Actions this week" (text-secondary), bar-chart icon
3. Unique Users: purple border, "4" (large, bold), "Active users" (text-secondary), users icon
4. Total Records: amber border, "2,481" (large, bold), "All time" (text-secondary), database icon

## FILTER ROW

Horizontal flex row:
- Action filter: dropdown with "All Actions" (default), Created, Updated, Deleted, Login, Logout, Exported, Imported, Status Change
- User filter: dropdown with "All Users" (default), Admin (You), John Smith, Maria Garcia, David Chen
- Date From: date input (Jan 1, 2026)
- Date To: date input (Jan 28, 2026)
- "Apply" button (btn btn-primary, small)
- "Clear" button (btn btn-outline, small)

## ACTIVITY LOG TABLE

- Columns: Icon | Date/Time | User | Action | Details
- Action badges are color-coded:
  - Created: badge-green
  - Updated: badge-blue
  - Deleted: badge-red
  - Login: badge-purple
  - Logout: badge-gray (text-muted bg)
  - Exported: badge-amber
  - Status Change: badge-blue
- 30+ rows (showing 20 per page with pagination):
  1. Jan 28, 10:42 AM | Admin | badge-green "Created" | New fuel record added for T-101 — Pilot #2847, 185 gal, $647.50
  2. Jan 28, 10:38 AM | Admin | badge-blue "Updated" | Order #ORD-2026-0892 status changed: Dispatched → In Transit
  3. Jan 28, 9:15 AM | Admin | badge-purple "Login" | Admin logged in from 192.168.1.100
  4. Jan 28, 8:50 AM | John Smith | badge-blue "Status Change" | Trip T-2026-0042 marked as Completed
  5. Jan 27, 4:30 PM | Admin | badge-amber "Exported" | Payroll report exported — Q4 2025
  6. Jan 27, 3:45 PM | Maria Garcia | badge-blue "Updated" | Inspection photos uploaded for Order #ORD-2026-0890
  7. Jan 27, 2:20 PM | Admin | badge-green "Created" | New trip T-2026-0043 created — NY to FL, 6 cars
  8. Jan 27, 1:10 PM | David Chen | badge-blue "Status Change" | Order #ORD-2026-0888 marked as Delivered
  9. Jan 27, 11:30 AM | Admin | badge-blue "Updated" | Driver pay adjusted for John Smith — Trip T-2026-0040
  10. Jan 27, 10:00 AM | Admin | badge-green "Created" | New maintenance record — T-103 turbo actuator, $2,450
  11. Jan 27, 9:30 AM | Admin | badge-purple "Login" | Admin logged in from 192.168.1.100
  12. Jan 26, 5:15 PM | Admin | badge-red "Deleted" | Duplicate fuel record removed — T-102, Jan 25
  13. Jan 26, 4:00 PM | Maria Garcia | badge-blue "Updated" | Order #ORD-2026-0886 — BOL uploaded
  14. Jan 26, 3:30 PM | Admin | badge-green "Created" | New task: Schedule DOT Inspection T-101
  15. Jan 26, 2:45 PM | John Smith | badge-blue "Status Change" | Trip T-2026-0041 — Loading at Terminal
  16. Jan 26, 1:00 PM | Admin | badge-blue "Updated" | Broker fee adjusted for Central Dispatch load #CD-48271
  17. Jan 26, 11:15 AM | David Chen | badge-green "Created" | Inspection report submitted — Order #ORD-2026-0884
  18. Jan 26, 10:30 AM | Admin | badge-amber "Exported" | Invoice batch exported — 12 invoices
  19. Jan 26, 9:00 AM | Admin | badge-purple "Login" | Admin logged in from 192.168.1.100
  20. Jan 25, 6:00 PM | Admin | badge-purple "Logout" | Admin session ended
- Details column: truncated with "..." for long entries, clickable to show detail modal

## PAGINATION

- "Showing 1-20 of 2,481 records"
- Previous / 1 / 2 / 3 / ... / 125 / Next buttons

## DETAIL MODAL (visible as inline mockup demo)

Below the table, show an activity detail modal overlay (rendered inline, same as payroll mockup approach):
- Semi-transparent backdrop section
- Modal card (max-width 500px, centered):
  - Header: "Activity Detail" with X close button
  - Fields:
    - Action: badge-green "Created"
    - Date/Time: January 28, 2026 at 10:42 AM
    - User: Admin
    - IP Address: 192.168.1.100
    - Resource: Fuel Record
    - Resource ID: FUEL-2026-0087
    - Description: "New fuel record added for T-101 at Pilot Travel Center #2847. 185 gallons of diesel at $3.50/gal. Total: $647.50. Card: WEX ending 4821."
    - Previous Value: — (new record)
    - New Value: "185 gal, $647.50, Pilot #2847"

---

**Styling notes:**
- Page-specific CSS in `<style>` tag for: filter row, action badge colors, detail modal, pagination. Target 100-120 lines.
- Action badges: each action type gets a distinct badge color
- Detail column: `max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;`
- Detail modal: rendered inline with slight darkened overlay background
- Pagination: standard design system button styling
  </action>
  <verify>
Open `mockups/web-tms-redesign/activity-log.html` in a browser. Verify:
1. Page loads without console errors
2. 4 stat cards (Today: 14, This Week: 87, Unique Users: 4, Total Records: 2,481)
3. Filter row with Action dropdown, User dropdown, Date From/To inputs, Apply/Clear buttons
4. 20-row activity table with color-coded action badges
5. Details column is truncated for long entries
6. Pagination shows "1-20 of 2,481"
7. Detail modal is visible inline below table with full activity info
8. Theme toggle works
  </verify>
  <done>activity-log.html exists with 4 stat cards, filter row (action, user, date range), 20-row paginated activity table with color-coded action badges, detail modal showing full activity info, and working theme toggle</done>
</task>

<task type="auto">
  <name>Task 3: Create team-chat.html with messages and input</name>
  <files>mockups/web-tms-redesign/team-chat.html</files>
  <action>
Create `team-chat.html` by copying the app shell from `base-template.html`. Set title to "Horizon Star TMS — Team Chat" and mark the Team Chat nav item as `active`.

Inside `<div class="page-content">`, build the complete team chat page.

**Reference production structure (lines 33307-33456 of index.html) for layout fidelity.**

---

## CHAT HEADER

Card-style header bar:
- Left: "Team Chat" (18px, bold) with message-circle icon
- Center: Online status: green dot + "4 online" (text-secondary)
- Right: "Refresh" button (btn btn-outline, small, with refresh-cw icon)

## MESSAGE AREA

Scrollable container (max-height: 600px, overflow-y: auto, bg-elevated background, border-radius, padding 20px):

**10 mock messages showing realistic dispatch team conversation:**

**Message 1 — Admin (You)**
- Avatar: "A" (blue circle), Name: "Admin" (bold, blue), Time: "9:15 AM"
- Text: "Good morning team. We have 3 trips going out today — T-2026-0043 to FL, T-2026-0044 to GA, and a local delivery in NJ."

**Message 2 — John Smith**
- Avatar: "JS" (green circle), Name: "John Smith" (bold), Time: "9:18 AM"
- Text: "Morning! I'm loaded up at the terminal, heading out to FL in about 30 min. 6 cars on the trailer."

**Message 3 — Admin (You)**
- Avatar: "A" (blue circle), Name: "Admin" (bold, blue), Time: "9:20 AM"
- Text: "Perfect @John Smith. Make sure to get the BOL signed before departure. The broker is Central Dispatch, load #CD-48293."
- @ mention: "John Smith" highlighted with blue background

**Message 4 — Maria Garcia**
- Avatar: "MG" (purple circle), Name: "Maria Garcia" (bold), Time: "9:25 AM"
- Text: "I'm picking up the GA load from the dealer in Edison. Should be loaded by noon."

**Message 5 — David Chen**
- Avatar: "DC" (amber circle), Name: "David Chen" (bold), Time: "9:30 AM"
- Text: "Local delivery is done — dropped off 2 cars at the dealer in Cherry Hill. Inspection photos uploaded."
- Attachment indicator: paper-clip icon + "inspection_photos.zip" (blue link text)

**Message 6 — Admin (You)**
- Avatar: "A" (blue circle), Name: "Admin" (bold, blue), Time: "9:32 AM"
- Text: "Great work @David Chen! Head back to the yard, we might have another local run this afternoon."

**Message 7 — Sarah Johnson**
- Avatar: "SJ" (red circle), Name: "Sarah Johnson" (bold), Time: "10:15 AM"
- Text: "Hey team, heads up — there's heavy traffic on I-95 near Philadelphia. Taking the PA Turnpike instead."

**Message 8 — John Smith**
- Avatar: "JS" (green circle), Name: "John Smith" (bold), Time: "10:45 AM"
- Text: "Thanks for the heads up Sarah. I'll take the same route. Also — the fuel prices at Pilot in NJ are $3.45 right now, pretty good."

**Message 9 — Admin (You)**
- Avatar: "A" (blue circle), Name: "Admin" (bold, blue), Time: "11:00 AM"
- Text: "Reminder: Q4 IFTA filing is due January 31st. I'll handle the submission this week."

**Message 10 — Maria Garcia**
- Avatar: "MG" (purple circle), Name: "Maria Garcia" (bold), Time: "11:30 AM"
- Text: "Loaded and heading out to GA. 5 cars, all inspected. ETA tomorrow morning."
- Attachment indicator: paper-clip icon + "bol_cd48295.pdf" (blue link text)

---

## MESSAGE INPUT AREA

Fixed at bottom of chat container:
- Textarea: placeholder "Type a message... (Use @ to mention someone)" (2 rows, full width, bg-card, border)
- Below textarea, flex row:
  - Left: paper-clip icon button (attachment), "Attach File" tooltip
  - Right: "Send" button (btn btn-primary, with send icon)
- @ mention hint: small text below input "Tip: Use @ to mention team members" (text-muted)

---

**Styling notes:**
- Page-specific CSS in `<style>` tag for: chat layout, message bubbles, avatar circles, @ mention highlighting, attachment indicator, input area. Target 80-100 lines.
- Message layout: flex row — avatar (36px circle) + content (flex: 1)
- Avatar circles: 36px, colored background, white initials (14px, bold)
- "Admin" messages: slightly different background (blue-dim at 5% opacity) to distinguish own messages
- @ mentions: `background: rgba(59,130,246,0.15); padding: 2px 4px; border-radius: 4px; color: var(--blue);`
- Attachment: paper-clip icon + filename as blue link
- Chat area: subtle scrollbar styling
- Input area: sticky at bottom of the chat container with border-top separator
  </action>
  <verify>
Open `mockups/web-tms-redesign/team-chat.html` in a browser. Verify:
1. Page loads without console errors
2. Chat header with "Team Chat" title, "4 online" status, Refresh button
3. 10 messages from 4 different users with colored avatars
4. Admin messages have slightly different background
5. @ mentions highlighted with blue background (Messages 3 and 6)
6. File attachment indicators on Messages 5 and 10
7. Message input area with placeholder, attachment button, send button
8. @ mention hint below input
9. Theme toggle works
  </verify>
  <done>team-chat.html exists with chat header (online status, refresh), 10 realistic messages from 4 users with colored avatars, @ mention highlighting, file attachment indicators, message input area with attachment and send buttons, and working theme toggle</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Settings page with 4 integration cards (Samsara GPS/configured, Google Maps/configured, Email-Resend/configured, Claude AI/not configured) — each with API key fields, status indicators, and action buttons. Activity Log with 4 stat cards, filter row, 20-row paginated table with color-coded action badges, and inline detail modal. Team Chat with chat header, 10 realistic dispatch team messages with avatars, @ mentions, file attachments, and message input area.</what-built>
  <how-to-verify>
1. Open `mockups/web-tms-redesign/settings.html` in your browser
2. Verify 4 stacked integration cards with colored left borders
3. Samsara: green border, "Configured" badge, masked API key, Test/Save/Remove buttons
4. Claude AI: amber border, "Not Configured" badge, empty field, setup instructions
5. Open `mockups/web-tms-redesign/activity-log.html`
6. Verify 4 stat cards (Today: 14, This Week: 87, Unique Users: 4, Total: 2,481)
7. Verify filter row with Action/User dropdowns and date range
8. Verify 20-row table with color-coded badges (Created=green, Updated=blue, Deleted=red, Login=purple, Exported=amber)
9. Verify pagination "1-20 of 2,481"
10. Verify detail modal rendered inline below table
11. Open `mockups/web-tms-redesign/team-chat.html`
12. Verify chat header with "4 online" status
13. Verify 10 messages with colored avatars (A=blue, JS=green, MG=purple, DC=amber, SJ=red)
14. Verify @ mentions highlighted blue in Messages 3 and 6
15. Verify file attachments on Messages 5 and 10
16. Verify message input area with attachment button and send button
17. Toggle dark/light theme on all 3 pages
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
- [ ] settings.html loads in browser without console errors
- [ ] 4 stacked integration cards (Samsara/green, Google Maps/blue, Email-Resend/purple, Claude AI/amber)
- [ ] Each configured card: masked API key, "Configured" badge, Test/Save/Remove buttons
- [ ] Claude AI: "Not Configured" badge, empty input, setup instructions
- [ ] activity-log.html loads in browser without console errors
- [ ] 4 stat cards (Today, This Week, Unique Users, Total Records)
- [ ] Filter row: Action dropdown, User dropdown, Date From, Date To, Apply, Clear
- [ ] 20-row activity table with color-coded action badges
- [ ] Details column truncated with ellipsis
- [ ] Pagination: "1-20 of 2,481"
- [ ] Detail modal rendered inline with full activity info
- [ ] team-chat.html loads in browser without console errors
- [ ] Chat header with title, online status (green dot + "4 online"), Refresh button
- [ ] 10 messages from 4+ users with colored avatar circles
- [ ] Admin messages have blue-dim background tint
- [ ] @ mentions highlighted with blue background
- [ ] File attachments on 2 messages with paper-clip icon
- [ ] Message input textarea with @ mention hint
- [ ] Attachment button and Send button
- [ ] Theme toggle works on all 3 pages
- [ ] shared.css referenced in all 3 files
</verification>

<success_criteria>
Settings mockup faithfully reproduces the production settings page with 4 integration cards showing configured/unconfigured states. Activity Log mockup reproduces the production activity log with filterable, paginated event table and detail modal. Team Chat mockup reproduces the production chat interface with realistic dispatch conversation, @ mentions, file attachments, and message input. All pages use Phase 6 design system with working light/dark toggle. This completes all 8 pages in Phase 10 and the entire v1.1 Web TMS UI Redesign Mockup project.
</success_criteria>

<output>
After completion, create `.planning/phases/10-operations-admin-pages/10-04-SUMMARY.md`
</output>
