---
phase: 11-design-system-foundation
plan: 03
type: execute
wave: 3
depends_on: ["11-02"]
files_modified:
  - index.html
autonomous: true

must_haves:
  truths:
    - "All hex colors in index.html lines 8050-22000 are replaced with var() CSS variable references"
    - "Theme toggle correctly switches colors in Dashboard, Login, Trips, Orders, LoadBoard, Drivers, and Trucks render functions"
    - "No visual regressions -- all status badges, buttons, borders, backgrounds render correctly in both themes"
  artifacts:
    - path: "index.html"
      provides: "Lines 8050-22000 with var() references instead of hex colors"
  key_links:
    - from: "index.html"
      to: "assets/css/design-system.css"
      via: "var() references resolve to design system tokens"
      pattern: "var\\(--"
---

<objective>
Replace all hardcoded hex colors in index.html JavaScript render functions (lines 8050-22000) with CSS variable references.

Purpose: This is the first half of the hex color migration in JS render functions. These lines cover critical pages: Dashboard, Login, LoadBoard, Trips, Orders, Drivers, Trucks, LocalDrivers, Brokers, Dispatchers, FuelTracking, and IFTA. After this plan, theme toggle will correctly affect all inline styles in these render functions.

Output: index.html lines 8050-22000 with zero (or near-zero) hardcoded hex colors.
</objective>

<execution_context>
@/Users/reepsy/.claude/get-shit-done/workflows/execute-plan.md
@/Users/reepsy/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-design-system-foundation/11-CONTEXT.md
@.planning/phases/11-design-system-foundation/11-02-SUMMARY.md
@assets/css/design-system.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace hex colors in lines 8050-15000 (Dashboard, Login, renderApp, LoadBoard, Trips)</name>
  <files>index.html</files>
  <action>
Systematically scan index.html lines 8050-15000 and replace every hardcoded hex color with the appropriate CSS variable reference. This range covers these render functions:
- `renderPaginationControls` (~line 8923)
- `renderExecutiveDashboard` (~line 10162)
- `renderLogin` (~line 11026)
- `renderDriverApplication` (~line 11160)
- `renderApp` (~line 12626)
- `renderNav` (~line 12844)
- Various inspection/activity render functions (~lines 13479-13946)
- `renderPage` (~line 13946)
- `renderDashboard` (~line 14141)
- `renderTasksWidget` (~line 14601)
- `renderLoadBoard` (~line 14691)

There are approximately 238 hex color occurrences in this range.

**Color mapping (same as Plan 02 Task 1):**

Green family:
- `#22c55e` -> `var(--green)`
- `#16a34a` -> `var(--green)` (or `var(--primary-600)`)
- `#15803d` -> `var(--primary-700)`
- `#166534` -> `var(--primary-800)`
- `#14532d` -> `var(--primary-900)`
- `#4ade80` -> `var(--primary-400)`
- `#059669` -> `var(--green)`
- `#047857` -> `var(--green)`
- `#10b981` -> `var(--green)`
- `#d1fae5`, `#dcfce7`, `#bbf7d0`, `#f0fdf4` -> `var(--green-dim)`

Red family:
- `#ef4444` -> `var(--red)`
- `#dc2626` -> `var(--red)`
- `#991b1b` -> `var(--red)`
- `#f87171` -> `var(--red)`
- `#fee2e2`, `#fecaca` -> `var(--red-dim)`

Amber family:
- `#f59e0b` -> `var(--amber)`
- `#d97706` -> `var(--amber)`
- `#fef3c7`, `#fffbeb` -> `var(--amber-dim)`

Blue family:
- `#3b82f6` -> `var(--blue)`
- `#2563eb` -> `var(--blue)`
- `#1d4ed8`, `#1e40af` -> `var(--blue)`
- `#dbeafe` -> `var(--blue-dim)`

Purple family:
- `#8b5cf6` -> `var(--purple)`
- `#7c3aed` -> `var(--purple)`

Gray/Neutral family:
- `#ffffff` -> `var(--bg-card)` for backgrounds, keep `white` for text on colored buttons
- `#f8fafc`, `#f8f9fa` -> `var(--bg-app)`
- `#f1f5f9`, `#f3f4f6` -> `var(--bg-card-hover)`
- `#e2e8f0`, `#e5e7eb` -> `var(--bg-elevated)`
- `#1e293b`, `#334155` -> `var(--bg-elevated)` in dark context
- `#0f172a`, `#111827` -> `var(--text-primary)` for text
- `#475569`, `#4b5563` -> `var(--text-secondary)`
- `#64748b`, `#6b7280` -> `var(--text-secondary)`
- `#94a3b8`, `#9ca3af` -> `var(--text-muted)`

**Context-sensitive rules:**
- In `style="background: #hex"` -> map to `var(--bg-*)` tokens
- In `style="color: #hex"` -> map to `var(--text-*)` or brand color tokens
- In `style="border*: * #hex"` -> use `var(--border)` for neutral borders, brand token for colored borders
- `#fff`/`#ffffff` as text color on colored backgrounds (buttons, badges) -> use keyword `white`
- Dim/light background colors used behind colored text (e.g., `background: #d1fae5; color: #059669`) -> `background: var(--green-dim); color: var(--green)`
- In `rgba()` expressions -> leave as-is if they're custom opacity values; if they match a dim token, use the dim token instead

**CRITICAL constraints:**
- Do NOT change any JavaScript logic, function signatures, variable names, or conditional expressions
- Do NOT change HTML tags, class names, or DOM structure
- Do NOT change CSS property names or selectors
- ONLY change color VALUES (hex strings) to var() references inside style attributes and template literals
- If a hex value is used in a non-style context (e.g., data attribute, JavaScript comparison), leave it alone
- Some hex values appear in JavaScript string comparisons or data processing -- do NOT change those
  </action>
  <verify>
Run: `awk 'NR>=8050 && NR<=15000' index.html | grep -oE '#[0-9a-fA-F]{6}\b' | wc -l`
Result should be under 15 (near-zero, allowing for edge cases like gradient stops that are hard to tokenize).
  </verify>
  <done>All hex colors in index.html lines 8050-15000 are replaced with CSS variable references. Dashboard, Login, LoadBoard, and Trips pages use design tokens for all inline colors.</done>
</task>

<task type="auto">
  <name>Task 2: Replace hex colors in lines 15001-22000 (Trips detail, Orders, Drivers, Trucks, LocalDrivers, Brokers, Dispatchers, Fuel, IFTA, Tasks, Compliance)</name>
  <files>index.html</files>
  <action>
Systematically scan index.html lines 15001-22000 and replace every hardcoded hex color with the appropriate CSS variable reference. This range covers these render functions:
- `renderTrips` continued and trip detail sections (~line 15508+)
- `renderSequenceList` (~line 16382)
- `renderOrders` (~line 17622)
- `renderDrivers` (~line 17845)
- `renderDriverTicketsViolationsSection` (~line 17976)
- `renderTrucks` (~line 18318)
- `renderLocalDrivers` (~line 18540)
- `renderBrokers` (~line 19014)
- `renderDispatchers` and `renderDispatcherRanking` (~line 19243+)
- `renderFuelTracking` and fuel sub-tabs (~line 19544+)
- `renderIFTA` (~line 20794)
- `renderTasks` (~line 21237)
- `renderCompliance` and compliance sub-functions (~line 21417+)

There are approximately 365 hex color occurrences in this range.

Use the SAME color mapping as Task 1. Apply the same context-sensitive rules and the same critical constraints.

Additional notes for this section:
- Fuel pages may have chart-related hex colors -- replace them with var() tokens for theme support
- Compliance pages have status-colored sections -- ensure status badges use `var(--green)`, `var(--red)`, `var(--amber)`, `var(--blue)` tokens
- Order detail views have vehicle status colors, payment status colors, and timeline accent colors -- all should use tokens
- Driver pages have availability status indicators -- use appropriate brand color tokens
  </action>
  <verify>
Run: `awk 'NR>=15001 && NR<=22000' index.html | grep -oE '#[0-9a-fA-F]{6}\b' | wc -l`
Result should be under 20 (near-zero, allowing for complex gradient edge cases).
  </verify>
  <done>All hex colors in index.html lines 15001-22000 are replaced with CSS variable references. Orders, Drivers, Trucks, Fuel, IFTA, Tasks, and Compliance pages use design tokens for all inline colors.</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `awk 'NR>=8050 && NR<=22000' index.html | grep -oE '#[0-9a-fA-F]{6}\b' | wc -l` should be under 30
2. Open index.html in browser, navigate to Dashboard -- colors render correctly
3. Toggle dark theme -- ALL colors in Dashboard, Orders, Drivers, Trucks, Fuel pages switch correctly
4. Navigate to Trips page, expand a trip detail -- colors switch with theme
5. Open a modal (e.g., create order) -- form inputs and buttons styled correctly
6. Status badges on Orders/Trips pages show correct color-coded indicators in both themes
</verification>

<success_criteria>
- Near-zero hex color literals in index.html lines 8050-22000
- All render functions in this range use var() references for color values
- Theme toggle correctly switches colors on all pages covered by this range
- No JavaScript errors in console
- No visual regressions in any page covered by this range
</success_criteria>

<output>
After completion, create `.planning/phases/11-design-system-foundation/11-03-SUMMARY.md`
</output>
